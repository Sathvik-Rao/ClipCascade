# <img src="https://github.com/user-attachments/assets/710bb1c3-0eda-48cf-819a-e066bde3a3ec" alt="ClipCascade Logo" width="34" /> ClipCascade

**ClipCascade** is a lightweight, open-source utility that automatically syncs your clipboard across multiple devices—no manual input required. It ensures seamless sharing with robust end-to-end encryption, providing a secure and reliable clipboard experience across workstations.

<div align="center">

<table>
  <tr>
    <th>Docker</th>
    <th>Windows</th>
    <th>macOS</th>
    <th>Android</th>
    <th>Linux</th>
  </tr>
  <tr>
    <td>
      <a href="https://hub.docker.com/r/sathvikrao/clipcascade">
        <img src="https://www.docker.com/wp-content/uploads/2022/03/Moby-logo.png" alt="Docker" width="50" />
      </a>
    </td>
    <td>
      <a href="https://github.com/Sathvik-Rao/ClipCascade/releases">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Windows_logo_-_2012.svg/512px-Windows_logo_-_2012.svg.png" alt="Windows" width="50" />
      </a>
    </td>
    <td>
      <a href="https://github.com/Sathvik-Rao/ClipCascade/releases">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Apple_logo_grey.svg" alt="macOS" width="40" />
      </a>
    </td>
    <td>
      <a href="https://github.com/Sathvik-Rao/ClipCascade/releases">
        <img src="https://upload.wikimedia.org/wikipedia/commons/d/d7/Android_robot.svg" alt="Android" width="40" />
      </a>
    </td>
    <td>
      <a href="https://github.com/Sathvik-Rao/ClipCascade/releases">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg" alt="Linux" width="40" />
      </a>
    </td>
  </tr>
</table>

</div>

<br />

<div align="center">
    <img src="https://github.com/user-attachments/assets/0b7178fd-e40f-400c-9c6f-6ea9f4e5b800" alt="arch_design_p2s" width="360" height="300" />
    <img src="https://github.com/user-attachments/assets/32366820-fc48-4849-914f-fe0474fa308a" alt="arch_design_p2p" width="360" height="300" />
</div>


## 📸 Screenshots

| 🪟 Desktop ([Windows](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#-windows-desktop-application)) | 🍏 Desktop ([macOS](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#-macos-desktop-application)) | 🤖📱 Mobile ([Android](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#-android-mobile-application)) | 🐧🖱️ Desktop ([Linux_GUI](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-linux-desktop-application-gui--%EF%B8%8F-linux-terminal-based-application-cli)) | 🐧⌨️ Desktop ([Linux_CLI](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-linux-desktop-application-gui--%EF%B8%8F-linux-terminal-based-application-cli)) | 
|-----------------------|--------------------|--------------------|--------------------|--------------------|
| <img src="https://github.com/user-attachments/assets/369d5db5-685c-4284-946d-b6a0e1f4fef9" alt="Desktop (Windows) - 1" width="360" /> | <img src="https://github.com/user-attachments/assets/2c0a7f4d-652c-4f4c-97e9-ee9b9d66f03f" alt="Desktop (macOS) - 1" width="360" /> | <img src="https://github.com/user-attachments/assets/a5606f3c-6d8a-434f-8f1d-03d6276e03c0" alt="Mobile (Android) - 1" width="360" /> | <img src="https://github.com/user-attachments/assets/f1acd9f4-27ee-4eb0-8696-a786a21551ed" alt="Desktop (Linux_GUI) - 1" width="360" /> | <img src="https://github.com/user-attachments/assets/f3f7c3a9-0299-4f0d-9494-5d9a102a243f" alt="Desktop (Linux_CLI) - 1" width="360" /> |
| <img src="https://github.com/user-attachments/assets/3d51539b-69d0-4b0d-8854-e262638333bd" alt="Desktop (Windows) - 2" width="240" /> | <img src="https://github.com/user-attachments/assets/3d473d8d-601e-4c78-bb7f-0684d39aef67" alt="Desktop (macOS) - 2" width="240" /> | <img src="https://github.com/user-attachments/assets/607135ff-498f-45ae-b60e-18da525b6b19" alt="Mobile (Android) - 2" width="240" /> | <img src="https://github.com/user-attachments/assets/394ab014-ae40-475d-8109-d95c9a69645b" alt="Desktop (Linux_GUI) - 2" width="240" /> | <img src="https://github.com/user-attachments/assets/daf0a4ac-4dcc-4547-9171-7bb0546f6712" alt="Desktop (Linux_non_GUI) - 2" width="240" /> |



## ✨ Features  

- **🚀 Instant Clipboard Sync** – Clipboard content updates in real time across all connected devices. Just copy, and it’s there!  
- **🔒 Secure Authentication** – Ensures only authorized users can sync clipboard data.  
- **🛡️ End-to-End Encryption** – Protects clipboard content with advanced cryptographic security and hashing techniques.  
- **🔄 Dual Sync Modes:**  
  - **☁️ Server-Based Sync** – Reliable cloud-based synchronization via a centralized server.  
  - **🔗 Peer-to-Peer Sync** – Direct device-to-device connection for ultra-low latency and minimal server dependency.  
- **💻 Cross-Platform Compatibility** – Works seamlessly on Windows, macOS, Linux, and Android.  
- **📄📷📁 Universal Clipboard** – Syncs text, images, and files effortlessly across devices.  
- **📦 Self-Hosting Option** – Deploy your own secure instance using a Docker image or standalone JAR file.  
- **👥 Multi-User Support** – Isolates clipboard data per user while enabling seamless syncing between personal devices.  
- **🌐 Web-Based Dashboard** – Track clipboard activity and manage settings through an intuitive interface.  
- **⚙️ Customizable Preferences** – Fine-tune sync settings for performance, security, and usability.  
- **🔔 Smart Update Notifications** – Stay informed about new features, security patches, and enhancements.  

   
<div align="center">
<table>
  <tr>
    <th>Type</th>
    <th>Windows</th>
    <th>MacOS</th>
    <th>Linux GUI</th>
    <th>Linux CLI</th>
    <th>Android</th>
  </tr>
  <tr>
    <td><strong>Text</strong></td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
  </tr>
  <tr>
    <td><strong>Image</strong></td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
  </tr>
  <tr>
    <td><strong>Files</strong></td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
    <td>✔</td>
  </tr>
</table>
</div>


## 📥 Installation Guide

### 🦾 Self-Hosting ClipCascade on Bare Metal:

To deploy the ClipCascade server on any operating system that supports Java 17 or later, follow the steps outlined below.

1. **Download the Server JAR File**  

    Obtain the latest release of `ClipCascade-Server-JRE_17.jar` from the [release page](https://github.com/Sathvik-Rao/ClipCascade/releases).

2. **Configure Environment Variables (Optional)**  

    The ClipCascade server supports various environment variables for customization. None of these variables are mandatory, but they can be configured as needed.  

    For a comprehensive list of available environment variables, refer to the [Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details) section.

    | Variable                     | Description                                                                                          | Default Value     | Example                           |
    |------------------------------|------------------------------------------------------------------------------------------------------|-------------------|-----------------------------------|
    | `CC_MAX_MESSAGE_SIZE_IN_MiB` | Defines the maximum allowed message size in MiB. Ignored if `CC_P2P_ENABLED` is set to `true`.       | `1`               | `3`                               |
    | `CC_ALLOWED_ORIGINS`         | Specifies the allowed CORS origins for secure cross-origin access.                                   | `*`               | `https://clipcascade.example.com` |
    | `CC_P2P_ENABLED`             | Enables or disables peer-to-peer mode. When enabled, `CC_MAX_MESSAGE_SIZE_IN_MiB` is ignored.        | `false`           | `true`                            |
    | `CC_SIGNUP_ENABLED`          | Allows or restricts user self-registration.                                                          | `false`           | `false`                           |
    | `CC_PORT`                    | Specifies the port on which the server listens for incoming connections.                             | `8080`            | `1234`                            |
   
3. **Start the Server**  
    Run the following command in the terminal to launch the ClipCascade server:

    ```bash
    java -jar ClipCascade-Server-JRE_17.jar
    ```
   
4. **Access the Server**  
    Once the server is running, you can access it via:

    ```
    http://localhost:8080
    ```

    - **Default Credentials:**  
      - **Username:** `admin`  
      - **Password:** `admin123`  

> **Important:** It is strongly recommended to change the default credentials immediately after the initial login.

For guidance on setting up a **reverse proxy**, refer to the [Reverse Proxy Setup](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#-reverse-proxy-setup) section.

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)

* * * * * * *

### 🐳 Self-Hosting ClipCascade Using Docker:

To host ClipCascade on your server using Docker, follow these steps:

1. Create a `docker-compose.yml` File

    Create a `docker-compose.yml` file with the following content, or download it from the [release page](https://github.com/Sathvik-Rao/ClipCascade/releases):

    ```yaml
    services:
      clipcascade:
        image: sathvikrao/clipcascade:latest
        ports:
          - "8080:8080"  # Expose the ClipCascade server on port 8080
        restart: always  # Automatically restart the container if it stops
        volumes:
          - ./cc_users:/database  # Persistent storage for user data
        environment:
          - CC_MAX_MESSAGE_SIZE_IN_MiB=1   # Maximum message size in MiB (ignored if P2P mode is enabled)
          - CC_P2P_ENABLED=false  # Enables or disables peer-to-peer(P2P) mode
          # - CC_ALLOWED_ORIGINS=https://clipcascade.example.com  # Defines allowed CORS origins for security
          # - CC_SIGNUP_ENABLED=false  # Enables or disables user self-registration
   ```
    
   For additional `.yml` configuration files, visit [ClipCascade Server Docker Configuration](https://github.com/Sathvik-Rao/ClipCascade/tree/main/ClipCascade_Server/docker-compose).
  
2. Deploy the Docker Container

    Run the Docker container using Docker Compose:

    ```
    docker-compose up -d
    ```

3. **Access the Server**  
    Once the server is running, you can access it via:

    ```
    http://localhost:8080
    ```

    - **Default Credentials:**  
      - **Username:** `admin`  
      - **Password:** `admin123`  


> **Important:** It is strongly recommended to change the default credentials immediately after the initial login.

For guidance on setting up a **reverse proxy**, refer to the [Reverse Proxy Setup](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#-reverse-proxy-setup) section.

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)

<div align="center">
   <img src="https://github.com/user-attachments/assets/02151726-2a26-42d7-8863-ae4512754eb3" alt="Web Page login" width="300"  />
   <img src="https://github.com/user-attachments/assets/6f346d46-3334-4306-9f62-e0f98f1c0506" alt="Web Page home" width="300"  />
   <img src="https://github.com/user-attachments/assets/74252e8e-e8f9-4a9a-a15d-0c3cc987b09c" alt="Web Page advance" width="300"  />
</div>

* * * * * * *

### 🪟 Windows Desktop Application:

To install the ClipCascade Windows desktop application, follow these steps:

1. **Download the Installer**
    - Get the latest version of ClipCascade from the [Releases page](https://github.com/Sathvik-Rao/ClipCascade/releases).
2. **Install the Application**
    - Run the downloaded `.msi` installer and follow the on-screen instructions, and select the default installation path specified by the installer.
    - Startup is enabled by default; you can disable it in the Task Manager if desired.
3. **Launch and Configure**
    - Open ClipCascade after installation and **log in** to start syncing your clipboard across devices.
    - When prompted, enter your **server's IP address, port number, or domain name**.
    - If encryption is enabled, ensure it is **enabled on all devices**.
    - In the **Extra Config** section, you can set a local clipboard size limit. By default, no limit is enforced (note: large file transfers may cause temporary unresponsiveness).

**Important Note:** Since the application is not published or registered with Microsoft, you may see a warning suggesting that it could be unsafe. This is a standard precaution and does not indicate any issues with the software. You can choose to ignore this warning or temporarily disable your antivirus during installation. All source code is available in this repository, and everything is open source and free. If you prefer, you can compile the executable yourself. Feel free to review the code to ensure your comfort! **Registering the application with Microsoft requires purchasing a certificate subscription, which is quite expensive, especially for an open-source project.**

The `.exe` file does not need UAC approval because it is standalone executable, while the `.msi` installer will request UAC permissions because it creates a designated folder for the software, adds a startup option, and allows for uninstallation via the Control Panel. Additionally, with the .msi installer, you have the option to choose any location to save the software. However, select locations where even when you create a file manually at that location, Windows shouldn’t prompt for permission to answer "yes or no" questions.

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)

* * * * * * *

### 🍏 macOS Desktop Application:

To install the ClipCascade macOS desktop application, follow these steps:

1. **Download the Application**
    - Visit the [Releases page](https://github.com/Sathvik-Rao/ClipCascade/releases) and download the appropriate version:
      - **For M-series chips** (Apple Silicon), download `ClipCascade-Apple_macOS(ARM_M-Series).zip`.
      - **For Intel chips**, download `ClipCascade-Apple_macOS(Intel-Series).zip`.
    - You can check your chip type by navigating to **Apple Menu** → **About This Mac**.
   
2. **Extract the Archive**
    - Double-click the `.zip` file to extract its contents.

3. **Locate the Application**
    - Open the extracted folder to find the **ClipCascade** application.
    - Move the application to a preferred location, such as the **Applications** folder.

4. **First-time launch (see note below for more information)**
    - **Right-click** (not double-click) on the **ClipCascade** application and select **Open**.
     
        <img src="https://github.com/user-attachments/assets/90b58940-69ed-4d35-a22d-1aa9988c014c" alt="ClipCascade->RightClick->Open" width="500" />
    - If you encounter the warning *"Apple could not verify 'ClipCascade' is free..."*, click **Done** or **Ok**. ([Apple Guide](https://support.apple.com/en-us/102445))
  

       <img src="https://github.com/user-attachments/assets/986c3aef-28cf-4293-8ec8-180508d7e172" alt="Apple Warning" width="150" />
       <img src="https://github.com/user-attachments/assets/8c604467-6dee-4977-8e3e-6473201e0e32" alt="Apple Warning" width="150" />
       
       - Go to **System Preferences** > **Security & Privacy** > Click **Open Anyway** (if you see the option), and when you re-run(right click->open) the application warning prompt reappears one last time, click **Open Anyway** or **Open**.  ([Apple Guide](https://support.apple.com/en-us/102445))
         
           <img src="https://github.com/user-attachments/assets/b6f41164-f73d-4e77-a110-b175a22057c6" alt="settings->security->open_anyway" width="250" />
           <img src="https://github.com/user-attachments/assets/41bde005-537a-4950-bfe7-d55c9e767b15" alt="Apple Warning" width="150" />
           <img src="https://github.com/user-attachments/assets/4803a2ba-acdf-41d9-a707-a8f22de12855" alt="Apple Warning" width="150" />

5. **Wait for the app to launch**
    - When you open the application, macOS will scan the application. This may take **10–30 seconds**.

6. **Configure the application**
    - When prompted, enter your **server's IP address, port number, or domain name**.
    - If encryption is enabled, ensure it is **enabled on all devices**.
    - In the **Extra Config** section, you can set a local clipboard size limit. By default, no limit is enforced (note: large file transfers may cause temporary unresponsiveness).

7. **Access the App from the Menu Bar**
    - Once logged in, the application will run in the **menu bar** with a clipboard icon at the top of your screen.

8. **Enable Auto-Startup**:
     - Right-click the **ClipCascade** icon in the dock (bottom of the screen).
     - Select **Options** and then check **Open at Login**.

       <img src="https://github.com/user-attachments/assets/cadeb680-d1fd-4582-9d20-b41ba8713b39" alt="Startup" width="200" />

**Important Note:** Since the application is not published or registered with Apple, you may see a warning suggesting that it could be unsafe. This is a standard precaution and does not indicate any issues with the software. You can choose to ignore this warning. All source code is available in this repository, and everything is open source and free. If you prefer, you can compile the executable yourself. Feel free to review the code to ensure your comfort! **Registering the application with Apple requires purchasing a certificate subscription, which is quite expensive, especially for an open-source project.**

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)

* * * * * * *

### 🤖📱 Android Mobile Application:

To install the ClipCascade mobile application on your Android device, follow these steps:

1. **Download** the latest APK from the [Releases page](https://github.com/Sathvik-Rao/ClipCascade/releases).
2. **Enable** installation from unknown sources in your device settings, if prompted.
3. **Install** the APK by following the prompts on your device.
4. **Open** ClipCascade and log in to begin syncing your clipboard across devices.
    - When prompted, enter your **server's IP address, port number, or domain name**.
    - If encryption is enabled, ensure it is **enabled on all devices**.
    - In the **Extra Config** section, you can set a local clipboard size limit. By default, no limit is enforced (note: large file transfers may cause temporary unresponsiveness).

#### Android Automatic Clipboard Monitoring Setup:

ClipCascade supports automatic clipboard monitoring for both rooted and non-rooted devices. To activate this feature, execute the following ADB commands.

##### Install ADB

Before proceeding, make sure ADB is installed on your system. Follow the instructions [here](https://www.xda-developers.com/install-adb-windows-macos-linux/) to install ADB on Windows, macOS, or Linux.

##### ADB Commands

1. **Grant the `READ_LOGS` permission:**
   ```bash
   adb -d shell pm grant com.clipcascade android.permission.READ_LOGS
   ```

2. **Enable "Display/Drawing over other apps," "Screen overlay," or "Appear on top":**
   This permission can also be enabled from the device's Settings. To set it via ADB, use:
   ```bash
   adb -d shell appops set com.clipcascade SYSTEM_ALERT_WINDOW allow
   ```

3. **Kill the app for the new permissions to take effect:**
   ```bash
   adb -d shell am force-stop com.clipcascade
   ```
![adb commands](https://github.com/user-attachments/assets/3faa8d71-d099-48d5-9846-4683cf77f285)

> Once the setup is complete, it operates seamlessly without requiring any extra steps. It monitors log entries related to ClipCascade, and if it detects an error during a clipboard copy action, it will trigger an overlay window to gain focus. This overlay allows the app to capture the clipboard content and send it to the connected devices immediately before going out of focus and closing. When the app is uninstalled, these permissions will be removed, requiring you to redo these steps. Additionally, each time you start the foreground service, it will prompt you to choose whether to monitor logs. This ensures that everything remains secure and under your control.

After executing three ADB commands, when you click the **Start** button, you will see a pop-up message. Click **"Allow."**

<img src="https://github.com/user-attachments/assets/0d3649d7-1e57-448c-ade9-10641191402d" alt="allow_log_monitoring" width="200" />

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)

* * * * * * *

### 🐧🖱️ Linux Desktop Application (GUI) / 🐧⌨️ Linux Terminal-Based Application (CLI):

This guide provides step-by-step instructions to install ClipCascade on Debian/Ubuntu, Fedora, and Arch-based systems. While the commands are specifically tailored for these distributions, you can adapt the process for other Linux distributions with minor modifications. The Linux code is available on the [Releases page](https://github.com/Sathvik-Rao/ClipCascade/releases) as `ClipCascade_Linux.zip`. Once downloaded, navigate to the `ClipCascade/` folder containing `main.py`, and open a terminal in that directory.
> **Note:** Linux systems use different display servers, primarily `X11` and `Wayland`. `Wayland` can also include `XWayland`, which supports `X` sessions. The program automatically detects the display server and selects the appropriate interface, either **GUI** or **CLI**, based on the environment.

#### Step 1: Check for updates and install required packages

##### Debian/Ubuntu:
```
sudo apt update
sudo apt install -y python3 python3-pip python3-gi xclip wl-clipboard dunst
```

##### Fedora:
```
sudo dnf check-update
sudo dnf install -y python3 python3-pip python3-gobject xclip wl-clipboard dunst
```

##### Arch:
```
sudo pacman -Syu --noconfirm python python-pip python-gobject xclip wl-clipboard dunst xdg-utils
```


#### Step 2: Install GTK 3.0 for clipboard monitoring and GUI support

##### Debian/Ubuntu:
```
sudo apt install -y python3-gi-cairo gir1.2-gtk-3.0 gir1.2-gdk-3.0
```

##### Fedora:
```
sudo dnf install -y libappindicator-gtk3
```

##### Arch:
```
sudo pacman -S --noconfirm python-gobject gtk3
```

#### Step 3: Install GNOME tray support extension (if tray icon is unavailable)
Install the [GNOME tray support extension](https://extensions.gnome.org/extension/615/appindicator-support/).


#### Step 4: Install Python Dependencies

##### Debian/Ubuntu/Fedora:
```
sudo pip3 install -r requirements.txt
```

##### Arch:
```
sudo pip install -r requirements.txt
```

#### Step 4.1: Fix `externally-managed-environment` Error (if applicable)

If you encounter the `error: externally-managed-environment`, install the required Python packages manually.

##### Debian/Ubuntu:
```
sudo apt install -y python3-xxhash python3-pyperclip python3-requests python3-websocket python3-pycryptodome python3-tk python3-pystray python3-pyfiglet python3-bs4 python3-plyer
```

##### Fedora:
```
sudo dnf install -y python3-xxhash python3-pyperclip python3-requests python3-websocket-client python3-pycryptodomex python3-tkinter python3-pystray python3-pyfiglet python3-beautifulsoup4 python3-plyer
```

##### Arch:
```
sudo pacman -S --noconfirm python-xxhash python-pyperclip python-requests python-websocket-client python-pycryptodome tk python-pystray python-pyfiglet python-beautifulsoup4 python-plyer
```
If you encounter the `error: target not found: python-plyer`, install via `yay -S --noconfirm python-plyer`


#### Step 5: Run the Application

Start ClipCascade by running (use sudo if needed):
   - When prompted, enter the server's IP address, port number, or domain name.
   - If encryption is enabled, please ensure it is enabled on all devices.
```
python3 main.py
```


#### Step 5.1: Fix 'No module named `Crypto`' Error (if applicable)

If you encounter the `No module named 'Crypto'` error, create a symbolic link for the Cryptodome library:
[see more](https://github.com/openthread/openthread/issues/1137#issuecomment-140879139)


##### Debian/Ubuntu:
```
sudo ln -s /usr/lib/python3/dist-packages/Cryptodome /usr/lib/python3/dist-packages/Crypto
```

##### Fedora:
```
sudo ln -s /usr/lib/python3/site-packages/Cryptodome /usr/lib/python3/site-packages/Crypto
```

##### Arch:
```
sudo ln -s /usr/lib/python3.*/site-packages/Cryptodome /usr/lib/python3.*/site-packages/Crypto
```

#### Step 5.2: Fix 'ModuleNotFoundError: No module named `tkinter`' Error (if applicable)

If you encounter the `No module named 'tkinter'` error:

##### Debian/Ubuntu:
```
sudo apt install -y python3-tkinter
```

##### Fedora:
```
sudo dnf install -y python3-tkinter
```

##### Arch:
```
sudo pacman -S --noconfirm tk
```

#### Step 5.3:  Fix '`gtk_widget_get_scale_factor: assertion 'GTK_IS_WIDGET (widget)' failed`' Error (if applicable)

This error occurs due to a missing tray icon extension in GNOME. To resolve it, you can install the extension from [here](https://extensions.gnome.org/extension/615/appindicator-support)


#### Step 5.4:  Fix '`g-exec-error-quark`' Error (if applicable)

##### Debian/Ubuntu:
```
sudo apt install dbus-x11
```

##### Fedora:
```
sudo dnf install dbus-x11
```

##### Arch:
```
sudo pacman -S --noconfirm dbus
```

#### Step 6: Run the Application in the Background (if needed)

To run ClipCascade as a background process (if the GUI setup is functional), use the following command:
```
nohup python3 main.py &> /dev/null &
```
If root privileges are required, use:
```
sudo nohup python3 main.py &> /dev/null &
```


#### Step 7: Add ClipCascade to Startup Script (if needed)

To ensure ClipCascade starts automatically when your system boots, modify the file paths as necessary and add the appropriate command to your startup script.

##### Example:
##### GUI
```
cd /path/to/clipcascade/src/ && nohup python3 main.py &> /dev/null &
```
If root privileges are required, use:
```
cd /path/to/clipcascade/src/ && sudo nohup python3 main.py &> /dev/null &
```

##### CLI
```
cd /path/to/clipcascade/src/ && python3 main.py
```
If root privileges are required, use:
```
cd /path/to/clipcascade/src/ && sudo python3 main.py
```

[➡️ Explore Advanced Details](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#%EF%B8%8F-advanced-details)


## ⚙️ Advanced Details


### 🗄️ Server Configuration

#### Default Admin Credentials:
- **Username:** `admin`
- **Password:** `admin123`

#### Supported Environment Variables:

1. **`CC_MAX_MESSAGE_SIZE_IN_MiB`**  
   - **Purpose:** Sets the maximum message size (in MiB) that the server can handle.  
   - **Platform-specific behavior:**
     - **Android:** Supports larger clipboard sizes for images and files. However, text is typically limited to ~1 MiB.
     - **Desktop:** Supports larger clipboard sizes for text, images, and files.  
   - **Default Value:** `1 MiB`  
   - **Usage:** Adjust this value based on your use case and platform requirements.  
   - **Example:** `CC_MAX_MESSAGE_SIZE_IN_MiB=3`  

   > **Note:** Individual clients can configure their own limits via the "Extra Config" option on the login page.

2. **`CC_ALLOWED_ORIGINS`**  
   - **Purpose:** Specifies which domains are permitted to connect to the WebSocket (CORS policy).  
   - **Default Behavior:** If not set, all origins are allowed by default, which may pose security risks.  
   - **Usage:** Replace the URL with your ClipCascade server's domain.  
   - **Example:** `CC_ALLOWED_ORIGINS=https://clipcascade.example.com`  

3. **`CC_SERVER_DB_PASSWORD`**  
   - **Purpose:** Encrypts the user database with a secure password.  
   - **Default Value:** `QjuGlhE3uwylBBANMkX1 o2MdEoFgbU5XkFvTftky`  
   - **Usage:** Replace `<file password>` and `<user password>` with strong, secure values. Ensure the same password is used when migrating the database.  
   - **Example:** `CC_SERVER_DB_PASSWORD=QjuGlhE3uwylBBANMkX1 o2MdEoFgbU5XkFvTftky`

4. **`CC_SERVER_LOGGING_LEVEL`**  
   - **Purpose:** Configures the server's logging level for diagnostics and troubleshooting.  
   - **Available Levels:**  
     - `TRACE` (most detailed)  
     - `DEBUG`  
     - `INFO` (default)  
     - `WARN`  
     - `ERROR`  
     - `FATAL`  
     - `OFF` (disables logging)  
   - **Example:** `CC_SERVER_LOGGING_LEVEL=DEBUG`  

#### Health Check Endpoint:
- **Purpose:** Verifies if the server is running and operational.  
- **Endpoint:** `/health`  
- **Response:** Returns `OK` with a status code `200` when the server is up and running.
  
### 🖥️📱 Client Apps
- Logs (`clipcascade_log.log`) are stored in the installation directory on Windows and Linux, and in `<current user>/Library/Application Support/ClipCascade/` on macOS. These logs allow you to review application activity and are automatically reset each time the application is reopened, preventing indefinite growth.
- The `DATA` file stores settings and user details, enabling the app to retain this information across both restarts and updates.
- On Linux and macOS, a `ClipCascade.lock` file is created while the program is running. This file ensures that only a single instance of ClipCascade can be opened at a time.

#### Extra Config/Advanced Settings (Desktop/Mobile):
- **Maximum Clipboard Size Local Limit (in bytes)**: If the app crashes or stops unexpectedly, it may be due to receiving clipboard content exceeding the platform's maximum size limit. You can set a local size limit by specifying a value in bytes (e.g., 512 KiB = 524288 bytes) to test different thresholds suitable for your device. This local limit works alongside the server-specified limit to ensure smoother operation without crashes. For example, on Android (particularly on the Pixel 6a as of 2024), the platform limit(for text) is typically less than 1 MiB. Since the server limit cannot go below 1 MiB, setting the local limit to around 900,000 bytes on the Pixel 6a can help prevent crashes.
- **Store Password Locally (not recommended)**: Enable this option if you frequently encounter session logouts. While the app stores session cookies for an extended period, a server restart may prompt a re-login. If re-entering the password becomes tedious, you can use this option to store your password locally for convenience.
   > Note: This option will only work if encryption is disabled, as encryption requires the raw password to generate a password hash, not the stored hashed password.
- **Enable Image Sharing and Enable File Sharing**: Enabling these options allows the app to send images or files. However, the app will continue to receive images and files even if these options are disabled.
- **Enable Notification**: Turn on this option to receive notifications about WebSocket disconnections and reconnections.
- **Enable Encryption (recommended)**: Enabling this option activates end-to-end encryption for clipboard data. This ensures that all clipboard content is encrypted before leaving your device. Refer to the section below on E2E encryption for detailed instructions on how it works and how to configure the `salt` and `hash rounds`.

  #### Desktop (Specific):
  - **Default File Download Location**: When this path is set, the app will save files directly to the specified location without prompting the user each time the "Download Files" button is clicked.
  
  #### Android (Specific):
  - **Run on System Startup**: Enable this option to allow the app to automatically start on system reboot. By default, this option is disabled. If you are using the [ADB](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#adb-commands) workaround, keep this option disabled to avoid issues with the READ_LOGS permission [popup](https://github.com/Sathvik-Rao/ClipCascade?tab=readme-ov-file#adb-commands) being dismissed, which prevents clipboard monitoring in the background.
  - **Enable Periodic Checks**: Enabling this option performs periodic checks to ensure clipboard monitoring and the foreground service are running. It verifies the service status when monitoring starts and then checks every 15 minutes in the background. If the service is not running, a notification is displayed. Clicking the notification will restart the service.
    
    <img src="https://github.com/user-attachments/assets/7341b960-5e60-4af6-b627-2183088de262" alt="periodic_check_notification" width="250" />


### 🔒 End-to-End Encryption Configuration for Clipboard Data

When encryption is enabled, clipboard data is encrypted directly on the client devices, ensuring true end-to-end encryption. The server does not store the encryption key, offering maximum security for your data.

Enabling the encryption option is all that's needed to activate encryption by default. However, advanced users have the option to further customize the encryption process by adjusting the following parameters:

- **Salt**: An optional string used as an additional input in the hashing process. For example, you could use a unique string like `"myCustomSalt123"` to enhance encryption security.
  
- **Hash Rounds**: An integer that specifies the number of hashing iterations. Increasing the hash rounds strengthens encryption by making it more computationally demanding. You can increase the default value of 664,937 to a higher number, such as 1,000,000, to boost security.

It is crucial to ensure the same **salt** and **hash rounds** are used across all client devices to maintain compatibility.

You can adjust these settings in the **Extra Config** section on the login page for users who require enhanced encryption options.

<img src="https://github.com/user-attachments/assets/59252f1c-c149-43c2-b0a2-c09ca075a5c1" alt="e2e" />


### 📋 Clipboard Functioning
- **Text and Images**: These are directly copied to the clipboard, enabling seamless sharing across devices.  
- **Files**: When files are received, a notification icon appears in the system tray (on desktop platforms). Since the clipboard does not store files, only their file paths are retained.  
  
   <table>
    <tr>
        <td align="center"><strong>Desktop</strong></td>
        <td align="center"><strong>Mobile</strong></td>
    </tr>
    <tr>
        <td><img src="https://github.com/user-attachments/assets/c4f06a97-1fc5-47e6-9ff5-d4dc3ff41c68" alt="desktop_tray_icon" /></td>
        <td><img src="https://github.com/user-attachments/assets/7708d786-3c95-4892-8815-0792fc2fd465" alt="android_notification" width="150" /></td>
    </tr>
    <tr>
	<td><img src="https://github.com/user-attachments/assets/eca756ad-76de-4fb9-ba14-619e92172758" alt="desktop_tray_options" width="150" /></td>
        <td><img src="https://github.com/user-attachments/assets/c06e8584-fbed-4ae1-b3b3-d12664115178" alt="android_home_screen" width="150" /></td>
    </tr>
   </table>


- **Clipboard Monitoring**:

   | **Platform**              | **Implementation Details**                                                                                                                                              |
   |---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Windows**               | Uses `win32gui`, `win32api`, `win32con`, and `win32clipboard` to capture clipboard changes in an event-driven manner.                                         |
   | **macOS**                 | Utilizes the `pasteboard` to monitor the clipboard with polling every 0.3 seconds. Instead of checking clipboard content directly, it compares a counter to detect changes efficiently. |
   | **Linux (X11)**           | Employs `Gtk.Clipboard` to capture clipboard changes in an event-driven manner, running in GUI mode.                                                         |
   | **Linux (XWayland, Unknown)** | Switches between `Gtk.Clipboard` (event-based) or `x-clip` (polling every 0.3 seconds) depending on permissions (requires sudo for `Gtk.Clipboard`). Both operate in GUI mode. |
   | **Linux (Wayland, Hyprland)** | Uses `wl-clipboard` with polling every 1 seconds in CLI mode. The delay accounts for Wayland's requirement to focus a window to grab clipboard content, ensuring smoother OS interaction. |
   | **Android**               | Leverages `ClipboardManager` to capture clipboard changes in an event-driven manner.                                                                         |


  <table border="1">
  <tr>
    <th rowspan="2">Type</th>
    <th colspan="5" align="center">Send</th>
    <th colspan="5" align="center">Receive</th>
  </tr>
  <tr>
    <th>Windows</th>
    <th>MacOS</th>
    <th>Linux GUI</th>
    <th>Linux CLI</th>
    <th>Android</th>
    <th>Windows</th>
    <th>MacOS</th>
    <th>Linux GUI</th>
    <th>Linux CLI</th>
    <th>Android</th>
  </tr>
  <tr>
    <td>Text</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱ / share</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
  </tr>
  <tr>
    <td>Image</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱ / share</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
  </tr>
  <tr>
    <td>Files</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>✱</td>
    <td>share</td>
    <td>click</td>
    <td>click</td>
    <td>click</td>
    <td>click</td>
    <td>click</td>
  </tr>
  </table>


## ⇄ Reverse Proxy Setup

Below is a screenshot demonstrating how to configure a reverse proxy using **Cloudflare Tunnels**. Similar configurations can be applied with other providers as well.

<img src="https://github.com/user-attachments/assets/0f45879f-307a-4f5f-9f26-ca5d3de7b1cf" alt="Reverse Proxy web" width="600" />

<img src="https://github.com/user-attachments/assets/5cdca092-8d6b-4b3e-ac2b-fb10390a4ca2" alt="login form desktop" width="400" />

### Note:
For other providers, you may need to configure HTTP to HTTPS redirection manually by adding a permanent redirection rule.

Example: Caddy Configuration
```
http://clipcascade.sample.com {
	redir https://clipcascade.sample.com{uri} permanent
}
```

### Note:
Additionally, it might be helpful to mention that the server uses WebSockets (ws/wss) for live clipboard broadcasting. In most cases, no extra configuration is needed for WebSockets since they typically rely on an HTTP switching protocol. Most providers will support WebSocket connections out of the box, without requiring additional setup. Example: `ws://localhost:8080/clipsocket`.


## 🔧 Usage

1. **Login:** Use your credentials to log into ClipCascade.
2. **Sync:** Copy any text or content to your clipboard, and it will automatically sync across your connected devices.
3. **Monitor:** Open the web-based monitoring page to see your clipboard history in real-time.

## 🌍 Contributing

Contributions are always welcome! Whether it's a feature request or a pull request, your input helps make ClipCascade even better.

## 📜 License

ClipCascade is licensed under the GNU General Public License v3.0 (GPL-3.0). See the [LICENSE](https://github.com/Sathvik-Rao/ClipCascade/blob/main/LICENSE) file for more details.


## 🛠️ TODO

Here are some planned features and improvements for future releases of ClipCascade:

🗳️ **Poll for Prioritization**: Cast your vote to prioritize features [here](https://github.com/Sathvik-Rao/ClipCascade/discussions/25).

- **Clipboard Data Storage:** Implement secure storage for clipboard data to store and access it later. 
- **OIDC/OAuth Authentication:** Integrate OpenID Connect (OIDC) and OAuth authentication for user login and management.  
- **iOS Support:** Develop and Release a version of ClipCascade for iOS.  


## 📦 Versioning

ClipCascade uses **Semantic Versioning (SemVer)** for releases:

- **🔴 Major (X)**: Incremented for releases that introduce **backward incompatible changes**.
- **🟠 Minor (Y)**: Incremented for **backward compatible functionality** added.
- **🟢 Patch (Z)**: Incremented for **backward compatible bug fixes** or minor improvements.

### Version Format

**X.Y.Z**  
Where:
- **X** is the major version.
- **Y** is the minor version.
- **Z** is the patch version.
  
Example versioning:
- **1.0.0**: Initial release.
- **1.1.0**: Added new features, backward compatible.
- **2.0.0**: Major changes, **not backward compatible**.


## 💬 Support

If you have any issues or questions, feel free to open an issue on GitHub, start a discussion, or reach out to me via [email](mailto:sathvik.poladi@gmail.com).

